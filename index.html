<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seurausten talo</title>
  <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
  <style>
    /* --------- V√ÑRIT JA FONTIT --------- */
    :root {
      --dark-blue: #1f2d3a;
      --accent-okra: #d28a22;
      --mid-grey: #c7c4bc;
      --sand-beige: #f3ecdc;
      --off-white: #fdfbfa;
    }

    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background-color: var(--off-white);
      color: var(--dark-blue);
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    /* --------- HEADER & LOGO --------- */
    header {
      background: var(--off-white);
      border-bottom: 4px solid var(--accent-okra);
      text-align: center;
      padding: 2rem 1rem 2rem;
    }

    header img {
      max-width: 600px;
      height: auto;
      margin-bottom: 1rem;
    }

    header h1 {
      font-size: 2rem;
      margin: 0.2rem 0;
    }

    header h2 {
      font-size: 1.1rem;
      font-weight: normal;
      color: #374859;
      margin-top: 0.3rem;
    }

    /* --------- GRAPH SECTION --------- */
    .graph-section {
      margin: 2rem auto;
      padding: 1.5rem;
      background: #ffffff;
      border: 2px solid var(--mid-grey);
      border-radius: 8px;
      max-width: 960px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .graph-section h3 {
      margin-top: 0;
      color: var(--dark-blue);
    }

    .graph-controls {
      margin-bottom: 1rem;
    }

    .graph-controls select, .graph-controls button {
      padding: 0.5rem 1rem;
      margin: 0.25rem;
      border-radius: 4px;
      font-size: 1rem;
    }

    .graph-controls select {
      border: 1px solid var(--mid-grey);
      background: var(--off-white);
    }

    .graph-controls button {
      border: none;
      background: var(--accent-okra);
      color: #fff;
      cursor: pointer;
    }

    .graph-controls button:hover {
      background: #b17218;
    }

    #cy {
      width: 100%;
      height: 500px;
      border: 1px solid var(--mid-grey);
      border-radius: 4px;
      margin-top: 1rem;
      background: #faf9f7;
    }

    /* --------- TEKSTI & NAV --------- */
    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    p {
      margin-bottom: 1rem;
    }

    blockquote {
      margin: 2rem 0;
      padding-left: 1rem;
      border-left: 4px solid var(--accent-okra);
      color: var(--dark-blue);
      font-style: italic;
      background: rgba(255,255,255,0.4);
    }

    nav {
      margin: 2.5rem 0;
      padding: 1rem 0;
      border-top: 2px solid var(--mid-grey);
      border-bottom: 2px solid var(--mid-grey);
      text-align: center;
    }

    nav a {
      display: inline-block;
      margin: 0.3rem 0.75rem;
      text-decoration: none;
      color: var(--dark-blue);
      font-weight: 500;
    }

    nav a:hover {
      color: var(--accent-okra);
      text-decoration: underline;
    }

    pre {
      background: #ffffff;
      border-left: 4px solid var(--accent-okra);
      padding: 1rem;
      overflow-x: auto;
    }

    /* --------- FOOTER --------- */
    footer {
      margin-top: 3rem;
      background: var(--dark-blue);
      color: var(--sand-beige);
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
    }

    footer a {
      color: var(--accent-okra);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>

<body>
  <header>
    <img src="/images/logo.webp" alt="Seurausten talo">
  </header>

  <div class="graph-section">
    <h3>üéÆ Interaktiivinen H.O.C. demo</h3>
    <p>Testaa p√§√§t√∂sten elinkaarta reaaliaikaisilla case-esimerkeill√§:</p>

    <div class="graph-controls">
      <label for="caseSelect">Valitse case: </label>
      <select id="caseSelect">
        <option value="opioidikriisi">ü©∫ Opioidikriisi</option>
        <option value="antibiootit">ü¶† Antibioottiresistenssi</option>
        <option value="syovaviiveet">üéóÔ∏è Sy√∂p√§viiveet</option>
        <option value="subprime2008">üè¶ Subprime 2008</option>
        <option value="kreikka_velka">üá¨üá∑ Kreikka velkakriisi</option>
        <option value="krypto2022">‚Çø Kryptoromahdus</option>
        <option value="enron">üìâ Enron skandaali</option>
      </select>
      <button onclick="loadCase()">Lataa graafi</button>
    </div>

    <div id="cy"></div>
  </div>

  <main>
    <p>Seurausten talo on paikka, jossa teot jatkuvat ajan l√§pi.</p>

    <p>Ihmiskunta osaa rakentaa v√§lineit√§ ‚Äì valtioita, markkinoita, teknologiaa ‚Äì
      mutta ei viel√§ rakenteita, jotka tekisiv√§t ihmisest√§ kyps√§n k√§ytt√§m√§√§n niit√§.</p>

    <p>Meill√§ on historiaa, arkistoja ja dataa enemm√§n kuin koskaan, mutta puuttuu
      institutionaalinen muistij√§rjestelm√§, joka pakottaisi oppimaan aiemmista
      virheist√§ ja est√§isi samojen kriisien toistamisen eri nimill√§.</p>

    <blockquote>
      Seurausten talo on ehdotus t√§llaisesta instituutiosta.<br>
      Se ei tuomitse, ei s√§√§d√§ lakeja, ei est√§ p√§√§t√∂ksi√§ ‚Äì <br>
      se vain tekee n√§kyv√§ksi, mit√§ p√§√§t√∂ksist√§ seuraa ajan kuluessa.
    </blockquote>

    <nav>
      <a href="toggle-lista.html">Rakennekehikko</a>
      <a href="ympyra-kaavio.html">Ympyr√§kaavio</a>
      <a href="ascii-ympyra.html">ASCII-pohja</a>
      <a href="ympyra-kaavio-interaktiivinen.html">Elinkaarin√§kym√§</a>
      <a href="valmis-pohja.html">Staattinen malli</a>
      <a href="ympyra-virtaus.html">Vaiheiden virtaus</a>
      <a href="generaattori.html">Elinkaari-generaattori</a>
    </nav>

    <h2>P√§√§t√∂ksen elinkaari</h2>
    <pre>
(6) MUUTOS NORMIKSI ‚ñ≤
        ‚îÇ
(5) KERTAUTUMINEN
        ‚îÇ
(1) P√Ñ√ÑT√ñS ‚ñ≤
        ‚îÇ
        ‚ñº
(4) SOPEUTUMINEN ‚îÄ‚îÄ‚îÄ (2) VAIKUTUS
        ‚îÇ
        ‚ñº
   (3) SEURAUKSET
    </pre>

    <p>Seurausten talo alkaa siit√§, mihin p√§√§t√∂ksenteko yleens√§ p√§√§ttyy.</p>
    <p>T√§√§ll√§ p√§√§t√∂kset eiv√§t p√§√§ty hetkeens√§. Ne saavat aikajanan,
      joka el√§√§ vuosikymmeni√§ eteenp√§in ja palaa takaisin p√§√§t√∂ksenteon rakenteisiin.</p>
  </main>

  <footer>
    ¬© 2026 Seurausten talo ‚Äì itseoppiva ja autonominen muisti | 
    <a href="https://github.com/unpersonanarkia-debug/seurausten-talo" target="_blank">GitHub</a>
  </footer>

  <script>
    let cy;

    function initCytoscape() {
      cy = cytoscape({
        container: document.getElementById('cy'),
        style: [
          { selector: 'node[id="0"]', style: {'background-color': '#ff6b6b', 'label': 'data(label)', 'width': 80, 'height': 80}},
          { selector: 'node[id="1"], node[id="2"]', style: {'background-color': '#ffd93d', 'label': 'data(label)', 'width': 60, 'height': 60}},
          { selector: 'node[id="3"], node[id="4"]', style: {'background-color': '#6bcf7f', 'label': 'data(label)', 'width': 60, 'height': 60}},
          { selector: 'node[id="5"]', style: {'background-color': '#4ecdc4', 'label': 'data(label)', 'width': 80, 'height': 80}},
          { selector: 'edge', style: {'width': 'mapData(weight, 0, 1, 1, 4)', 'line-color': '#999', 'curve-style': 'bezier', 'target-arrow-shape': 'triangle'}},
          { selector: 'edge[label*="fyysinen"]', style: {'line-color': '#ff4444'}},
          { selector: 'edge[label*="sosiaalinen"]', style: {'line-color': '#ffaa00'}},
          { selector: 'edge[label*="hallinto"]', style: {'line-color': '#4488ff'}},
          { selector: 'edge[label*="henkinen"]', style: {'line-color': '#ff44ff'}}
        ],
        layout: { name: 'cose' }
      });
    }

    async function loadCase() {
      const caseName = document.getElementById('caseSelect').value;
      let dataUrl = 'data/casebooks/terveydenhuolto.json';
      if (['subprime2008','kreikka_velka','krypto2022','enron'].includes(caseName)) {
        dataUrl = 'data/casebooks/talous.json';
      }
      try {
        const response = await fetch(dataUrl);
        const data = await response.json();
        const caseData = data.casebooks[caseName];
        cy.elements().remove();
        cy.add(caseData);
        cy.layout({ name: 'cose' }).run();
        cy.fit();
      } catch (error) {
        console.error('Case dataa ei l√∂ytynyt:', error);
        document.getElementById('cy').innerHTML =
          '<p style="padding:20px;color:#666;">Case-dataa ei l√∂ytynyt. Tarkista data/casebooks/-kansio.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      initCytoscape();
      setTimeout(loadCase, 500);
    });
  </script>
</body>
</html>
