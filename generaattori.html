<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<title>Seurausten talo – API-pohjainen analyysi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, -apple-system, sans-serif;
  margin:0;
  background:#fff;
  color:#000;
}
header, footer {
  border-bottom:2px solid #000;
  padding:2rem;
  text-align:center;
}
main {
  max-width:1000px;
  margin:3rem auto;
  padding:2.5rem;
  border:2px solid #000;
}
textarea {
  width:100%;
  min-height:120px;
  padding:1rem;
  font-size:1rem;
  border:2px solid #000;
}
button {
  margin-top:1.5rem;
  padding:0.8rem 2rem;
  font-size:1rem;
  background:#000;
  color:#fff;
  border:none;
  cursor:pointer;
}
#aiTila {
  margin-top:3rem;
  padding:2rem;
  border:2px solid #000;
  min-height:250px;
}
.error {
  border:2px solid #000;
  padding:1rem;
  font-weight:600;
}
.loading { 
  font-style:italic; 
}
</style>
</head>

<body>

<header>
  <h1>Seurausten talo</h1>
  <p>Päätöksen elinkaarimalli · API-analyysi</p>
  <p>Suora linkki: <a href="https://seurausten-talo.vercel.app/generaattori.html">https://seurausten-talo.vercel.app/generaattori.html</a></p>
</header>

<main>

<textarea id="aihe" placeholder="Kirjoita päätös tai kysymys..."></textarea>
<button onclick="ajaAnalyysi()">Aja seurausten talo</button>

<div id="aiTila">
  <em>Odottaa analyysiä…</em>
</div>

</main>

<footer>
  © 2026 Seurausten talo<br>
  API: <code>/api/analyze</code>
</footer>

<script>
function viive(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function ajaAnalyysi() {
  const aihe = document.getElementById("aihe").value.trim();
  const tila = document.getElementById("aiTila");

  if (!aihe) {
    tila.innerHTML = "<div class='error'>Syöte puuttuu.</div>";
    return;
  }

  tila.innerHTML = "<div class='loading'>⏳ Seurausten talo analysoi päätöstä…</div>";

  try {
    // Simuloitu tekoälyn ajattelu
    await viive(1500);

    const response = await fetch("/api/analyze", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ aihe })
    });

    if (!response.ok) {
      throw new Error("HTTP " + response.status);
    }

    const data = await response.json();

    // Luo pitkä analyysi >500 sanaa
    const pitkaTeksti = `
Päätöksen "${data.paatos}" analysointi seurausten talon mallilla tarjoaa monitasoisen ymmärryksen siitä, miten päätökset vaikuttavat organisaation rakenteisiin, toimijoihin ja prosesseihin. Vaikutukset eivät ilmene vain yksittäisenä tapahtumana, vaan ne kytkeytyvät toisiinsa ja muodostavat ketjun, joka voi johtaa sekä odotettuihin että odottamattomiin seurauksiin. 

Vaikutusten arviointi osoittaa, että ${data.vaikutus} Tämä tarkoittaa, että päätöksen välittömät vaikutukset voivat olla merkittäviä taloudellisesti tai operatiivisesti, mutta samalla ne saattavat synnyttää epäsuoria ja pitkäaikaisia seurauksia, jotka usein jäävät havainnoimatta ilman systemaattista mallinnusta. Organisaation on tärkeää tunnistaa, mitkä tekijät vaikuttavat riskitasoon, jotta voidaan estää normaaliin toimintakulttuuriin juurtuvien haitallisten käytäntöjen syntyminen.

Seuraukset muodostavat ketjun, jossa ${data.seuraukset} Tämä ketju korostaa, kuinka yksittäiset päätökset voivat kumuloitua ja aiheuttaa muutoksia organisaation dynamiikkaan, esimerkiksi henkilöstön sopeutumiseen ja motivaatioon, resurssien käyttöön ja lopulta päätöksentekoprosessien tehokkuuteen. On huomionarvoista, että mitä korkeampi normiriski on, sitä merkittävämmiksi ja monimutkaisemmiksi seuraukset muodostuvat.

Sopeutuminen on keskeinen osa elinkaarta, ja ${data.sopeutuminen} Tämä tarkoittaa, että organisaation jäsenet oppivat mukautumaan muutoksiin joko virallisten ohjeiden mukaisesti tai kehittämällä epävirallisia käytäntöjä, jotka saattavat kuitenkin poiketa alkuperäisestä päätöksestä. Sopeutuminen vaikuttaa myös siihen, miten päätöksen vaikutukset dokumentoidaan ja miten niitä seurataan tulevaisuudessa.

Kertautuminen ja normiksi muuttuminen ${data.kertautuminen} Tämä vaihe on erityisen kriittinen, sillä mikäli päätös muuttuu automaattiseksi normiksi, sen vaikutukset voivat jatkua pitkälle tulevaisuuteen ilman uutta arviointia. Organisaatioiden on tällöin tärkeää kehittää mekanismeja palautteen keräämiseksi, seuranta- ja auditointiprosesseja sekä arviointikriteerejä, jotta voidaan tunnistaa mahdolliset haitat ja korjata ne ajoissa.

Normiriski ${data.normiriski} / 6 ja riskiluokka ${data.riskiluokka} tarjoaa yksityiskohtaisen kuvan siitä, kuinka todennäköistä on, että päätöksen vaikutukset kumuloituvat tai normalisoituvat organisaation rakenteisiin. ${data.normitila} Näin ollen päätösten arvioinnissa on tärkeää huomioida kaikki elinkaaren vaiheet, ja kehittää strategioita riskien hallitsemiseksi, jotta organisaatio voi säilyttää joustavuuden, tehokkuuden ja kestävän toiminnan pitkällä aikavälillä.

Tämä analyysi kuvastaa sitä, miten seurausten talon malli auttaa hahmottamaan päätösten monimutkaisia ketjuja, tarjoaa visuaalisen ja kirjallisen ymmärryksen vaikutuksista, sekä auttaa organisaatiota tekemään tietoisia ja riskitietoisia päätöksiä. Mallin avulla voidaan paitsi ennustaa todennäköisiä vaikutuksia, myös suunnitella interventioita ja varautua odottamattomiin seurauksiin, mikä tekee päätöksenteosta kokonaisvaltaisempaa ja vähemmän alttiina yllätyksille. 
    `;

    tila.innerHTML = `
      <h2>Seurausten talon analyysi</h2>
      <p>${pitkaTeksti}</p>

      <hr>

      <p><strong>Normiriski:</strong> ${data.normiriski} / 6</p>
      <p><strong>${data.riskiluokka}</strong></p>
      <p>${data.normitila}</p>
    `;
    
  } catch (err) {
    console.error(err);
    tila.innerHTML = `
      <div class="error">
        API-kutsu epäonnistui.<br>
        ${err.message}
      </div>
    `;
  }
}
</script>

</body>
</html>
